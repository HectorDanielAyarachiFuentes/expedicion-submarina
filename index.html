<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>La Expedición - Una Aventura Submarina Retro</title>

    <!-- ===== METADATA MEJORADA ===== -->

    <!-- Información básica para SEO -->
    <meta name="description" content="Embárcate en 'La Expedición', un juego de disparos retro. Pilota un submarino, explora las profundidades, captura especímenes marinos y enfréntate a misteriosos jefes. Creado por Hector Daniel Ayarachi Fuentes.">
    <meta name="keywords" content="videojuego, juego, retro, pixel art, submarino, océano, aventura, arcade, shooter, html5, javascript, la expedicion">
    <meta name="author" content="Hector Daniel Ayarachi Fuentes">
    
    <!-- Protocolo Open Graph (para Facebook, LinkedIn, etc.) -->
    <meta property="og:title" content="La Expedición - Una Aventura Submarina Retro">
    <meta property="og:description" content="¡Sumérgete en una aventura arcade! Pilota tu submarino y explora las profundidades del océano.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://github.com/HectorDanielAyarachiFuentes/expedicion-submarina/blob/main/img/subastian.png"> <!-- REEMPLAZA CON LA URL COMPLETA A TU IMAGEN -->
    <meta property="og:url" content="https://hectordanielayarachifuentes.github.io/expedicion-submarina/"> <!-- REEMPLAZA CON LA URL COMPLETA DE TU JUEGO -->
    <meta property="og:site_name" content="La Expedición">


    <!-- Favicon y otros íconos -->
    <link rel="icon" type="image/png" href="img/subastian.png">
    <link rel="apple-touch-icon" href="img/subastian.png"> <!-- Icono para dispositivos Apple -->

    <!-- Color del tema para navegadores móviles -->
    <meta name="theme-color" content="#0d253d">

    <!-- ===== ESTILOS Y FUENTES ===== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Canvas del juego (detrás de todo) -->
    <canvas id="bgCanvas"></canvas>
    <canvas id="gameCanvas"></canvas>
    <canvas id="fxCanvas"></canvas>
    <canvas id="sonarCanvas"></canvas>
    <canvas id="hudCanvas"></canvas>

    <!-- ===== NUEVO: CONTENEDOR DEL VISOR EN VIVO (LIVE HUD) ===== -->
    <div id="live-hud-container">
        <div id="viewport-frame"></div> <!-- Marco/Vignette del visor -->

        <!-- Todos los elementos del HUD ahora van DENTRO del contenedor para que se muevan con él -->
        <div id="top-hud">
            <div id="status-bar">
                <div id="status-left" class="hud-pod">
                    <img id="logoHUD" src="img/logo.png" alt="Logo La Expedición">
                    <div id="status-text">
                        <div id="hud-level-text">NIVEL 1</div>
                        <div id="hud-objective-text">CAPTURAS: 0 / 10</div>
                    </div>
                </div>

                <div id="status-right" class="hud-pod">
                    <button id="pauseBtn" class="spritebtn" title="Pausar Juego">
                        <svg viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg>
                    </button>
                    <button id="helpBtn" class="spritebtn" title="Ver Controles">
                        <svg viewBox="0 0 24 24"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"></path></svg>
                    </button>
                    <button id="muteBtn" class="spritebtn" title="Silenciar / Activar Sonido">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path><path id="muteSlash" d="M1 1l22 22" stroke-width="2" stroke="currentColor" fill="none" style="display:none;"></path></svg>
                    </button>
                    <button id="fsBtn" class="spritebtn" title="Pantalla Completa">
                        <svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path></svg>
                    </button>
                    <button id="shareBtn" class="spritebtn" title="Compartir Juego">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"></path></svg>
                    </button>
                    <button id="infoBtn" class="spritebtn" title="Información y Créditos">
                        <svg viewBox="0 0 24 24"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></svg>
                    </button>
                </div>
            </div>
        </div>

        <div id="gameplay-hints">
            <div class="hint hint-grid" data-hint-type="movement">
                <span>MOVER</span>
                <kbd class="key-icon key-arrow-up"></kbd>
                <kbd class="key-icon key-arrow-left"></kbd>
                <kbd class="key-icon key-arrow-down"></kbd>
                <kbd class="key-icon key-arrow-right"></kbd>
            </div>
            <div class="hint" data-hint-type="all">
                <span>DISPARAR</span>
                <kbd class="key-icon key-spacebar"></kbd>
            </div>
            <div class="hint" data-hint-type="all">
                <span>ARMA</span>
                <kbd class="key-icon text-key">C</kbd>
            </div>
            <div class="hint" data-hint-type="all">
                <span>TORPEDO</span>
                <kbd class="key-icon text-key">X</kbd>
            </div>
            <div class="hint" data-hint-type="all">
                <span>IMPULSO</span>
                <kbd class="key-icon text-key">B</kbd>
            </div>
            <div class="hint" data-hint-type="all">
                <span>SONAR</span>
                <kbd class="key-icon text-key">M</kbd>
            </div>
            <div class="hint" data-hint-type="all">
                <span>ESCUDO</span>
                <kbd class="key-icon text-key">V</kbd>
            </div>
        </div>

        <div id="game-stats-overlay">
            <div class="stat-item">
                <span class="stat-label">PUNTOS</span>
                <span id="statScoreValue" class="stat-value">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">PROFUNDIDAD</span>
                <span id="statDepthValue" class="stat-value">0 m</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">DISTANCIA</span>
                <span id="statDistanceValue" class="stat-value">0 m</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">VELOCIDAD</span>
                <span id="statSpeedValue" class="stat-value">0 km/h</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">RÉCORD</span>
                <span id="statRecordValue" class="stat-value">0</span>
            </div>
            <hr class="stat-divider">
            <div class="stat-item">
                <span class="stat-label">VIDAS</span>
                <div id="statLivesContainer" class="lives-container"></div>
            </div>
            <div class="stat-item">
                <span class="stat-label">ARMA</span>
                <span id="statWeaponValue" class="stat-value weapon-status">GARRA</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">TORPEDO</span>
                <span id="statTorpedoValue" class="stat-value weapon-status">READY</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">RANGO</span>
                <span id="statAssassinValue" class="stat-value">NOVATO</span>
            </div>
            <hr class="stat-divider">
            <div class="stat-item bar-item">
                <span class="stat-label">IMPULSO</span>
                <div class="progress-bar-container"><div id="boostProgressBar" class="progress-bar boost-bar"></div></div>
            </div>
            <div class="stat-item bar-item">
                <span class="stat-label">LÁSER</span>
                <div class="progress-bar-container"><div id="laserProgressBar" class="progress-bar laser-bar"></div></div>
            </div>
            <div class="stat-item bar-item">
                <span class="stat-label">ESCUDO</span>
                <div class="progress-bar-container"><div id="shieldProgressBar" class="progress-bar shield-bar"></div></div>
            </div>
        </div>

        <div id="bossHealthContainer" style="display:none;">
            <div id="bossHealthBar"></div>
        </div>
    </div>

    <!-- ===== OVERLAYS Y MENÚS ===== -->
    <div id="overlay">
        <!-- Menú Principal / Pausa / Game Over -->
        <div id="mainMenu" class="menu-card">
            <!-- Contenido Principal del Menú -->
            <div id="mainMenuContent">
                <div id="mainMenuHeader"><img id="brandLogo" src="img/logo.png" alt="La Expedición"></div>
                <h2 id="gameOverTitle" style="display: none;"></h2>
                <img id="captainImage" src="img/nivelimg/dulcecapitan.png" alt="Imagen del Capitán" style="display: none;">
                <div id="welcomeMessage">
                    <h3 id="welcomeTitle">¡Bienvenido, Capitán!</h3>
                    <p id="welcomeSubtitle">Las profundidades aguardan tus órdenes.</p>
                </div>
                <p id="prompt" class="blinking-text">Presiona para Sumergirse</p>
                <div id="finalStats" style="display: none;">
                    <p id="statScore"></p>
                    <p id="statDepth"></p>
                    <p id="statDistance"></p>
                    <p id="statSpecimens"></p>
                </div>
                <div class="menu-buttons">
                    <button id="start" class="menubtn">Sumergirse</button>
                    <button id="restart" class="menubtn" style="display:none;">Reintentar</button>
                    <button id="levelSelectBtn" class="menubtn">Niveles</button>
                </div>
            </div>

            <!-- Selector de Niveles (Oculto por defecto) -->
            <div id="levelSelectContent" style="display: none;">
                <h2>Seleccionar Nivel</h2>
                <img id="levelSelectImage" src="img/nivelimg/dulceflamengo.png" alt="Selección de Nivel" class="level-select-image">
                <div id="level-selector-container">
                    <!-- Los botones de nivel se generarán aquí con JS -->
                </div>
                <div class="menu-buttons">
                    <button id="backToMainBtn" class="menubtn">Volver</button>
                </div>
            </div>
        </div>

        <!-- Transición de Nivel -->
        <div id="levelTransition" class="menu-card" style="display: none;">
            <h2 id="levelTitle"></h2>
            <p id="levelDesc"></p>
            <p>Prepárate...</p>
        </div>
    </div>

    <!-- Ventana de Información y Créditos -->
    <div id="infoOverlay" style="display: none;">
        <div class="menu-card info-card">
            <canvas id="infoAnimCanvas"></canvas>
            
            <h2>Información y Créditos</h2>

            <!-- Pestañas de Navegación -->
            <div class="info-tabs">
                <button class="info-tab-btn active" data-tab="creator">Creador</button>
                <button class="info-tab-btn" data-tab="gallery">Galería</button>
                <button class="info-tab-btn" data-tab="tech">Tecnologías</button>
            </div>

            <!-- Contenido de las Pestañas -->
            <div class="info-content">
                <div id="tab-creator" class="info-tab-panel active">
                    <div class="creator-profile">
                        <div class="profile-pic-container">
                            <img src="img/imgcreditos/dulce.jpg" alt="Foto del Creador" class="profile-pic" id="creator-pic">
                        </div>
                        <div class="creator-info">
                            <h3>Hector Daniel Ayarachi Fuentes</h3>
                            <p class="creator-bio">
                                Desarrollador apasionado por los videojuegos retro y las aventuras submarinas. ¡Gracias por jugar a "La Expedición"!
                            </p>
                            <a href="https://github.com/HectorDanielAyarachiFuentes" class="menubtn social-btn" target="_blank">
                                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.09.68-.22.68-.48v-1.69c-2.78.6-3.37-1.34-3.37-1.34-.45-1.15-1.11-1.46-1.11-1.46-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.89 1.53 2.34 1.09 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.95 0-1.09.39-1.98 1.03-2.68-.1-.25-.45-1.27.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.37.2 2.39.1 2.64.64.7 1.03 1.59 1.03 2.68 0 3.85-2.34 4.69-4.57 4.94.36.31.68.92.68 1.85v2.72c0 .27.18.58.69.48A10 10 0 0 0 22 12C22 6.48 17.52 2 12 2z"></path></svg>
                                Ver en GitHub
                            </a>
                        </div>
                    </div>
                </div>
                <div id="tab-gallery" class="info-tab-panel">
                    <div class="gallery">
                        <h4>Miembros Honorarios de la Expedición</h4>
                        <div class="gallery-grid">
                            <div class="gallery-item">
                                <img src="img/imgcreditos/Luna_rip.jpg" alt="Mis perros">
                                <div class="gallery-caption">¡Los verdaderos capitanes del submarino!</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="tab-tech" class="info-tab-panel">
                    <div class="tech-stack">
                        <h4>Tecnologías Utilizadas</h4>
                        <div class="tech-grid">
                            <div class="tech-item">
                                <span class="tech-icon">HTML</span>
                                <p>Estructura semántica y base de la interfaz de usuario.</p>
                            </div>
                            <div class="tech-item">
                                <span class="tech-icon">JS</span>
                                <p>Toda la lógica del juego, física y renderizado, implementada en JavaScript puro (Vanilla JS).</p>
                            </div>
                            <div class="tech-item">
                                <span class="tech-icon">CSS</span>
                                <p>Estilos, animaciones y diseño responsivo para una experiencia visual pulida.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button id="closeInfo" class="menubtn">Cerrar</button>
        </div>
    </div>

    <!-- ===== NUEVO: OVERLAY DE DESCONEXIÓN DE MANDO ===== -->
    <div id="controller-disconnect-overlay" style="display: none;">
        <div class="menu-card">
            <h2>Mando Desconectado</h2>
            <p>Tu mando se ha desconectado. Puedes continuar la partida con el teclado.</p>
            <button id="resume-with-keyboard-btn" class="menubtn">Volver al Juego</button>
        </div>
    </div>

    <!-- ===== NUEVO: PROMPT DE CONEXIÓN DE MANDO ===== -->
    <div id="controller-connect-prompt" style="display: none;">
        <div class="menu-card">
            <h2>Mando Detectado</h2>
            <p>Se ha conectado un mando. ¿Deseas cambiar a los controles del mando?</p>
            <div class="menu-buttons">
                <button id="use-gamepad-btn" class="menubtn">Usar Mando</button>
                <button id="stay-on-keyboard-btn" class="menubtn">Seguir con Teclado</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>